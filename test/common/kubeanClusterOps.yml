apiVersion: kubean.io/v1alpha1
kind: ClusterOperation
metadata:
  name: e2e-cluster1-install
  labels:
    clusterName: cluster1
spec:
  cluster: cluster1
  image:
  actionType: playbook
  action: cluster.yml
  preHook:
    - actionType: playbook
      action: ping.yml
    - actionType: playbook
      action: disable-firewalld.yml
    - actionType: playbook
      action: remove-pkgs.yml
    - actionType: shell
      action: |-
        sed -i 's/maxUnavailable: 0/maxUnavailable: 1/' /kubespray/roles/kubernetes-apps/ansible/templates/coredns-deployment.yml.j2
    - actionType: playbook
      action: rh8-compat.yml
  postHook:
    - actionType: playbook
      action: kubeconfig.yml
    - actionType: playbook
      action: cluster-info.yml